#Config file for the foxtrot core package

@PACKAGE_INIT@
set(foxtrot_core_INCLUDE_DIRS "@CONF_INCLUDE_DIRS@")

#set(CMAKE_MODULE_PATH "${CMAKE_MODLE_PATH}/${foxtrot_CMAKE_DIR}")
set(foxtrot_core_PREFIX ${PACKAGE_PREFIX_DIR})

include(CMakeFindDependencyMacro)

if(EXISTS ${CMAKE_CURRENT_LIST_DIR}/installtree)
    message(WARNING "foxtrotCoreConfig configuring from BUILD TREE! You may not want this!")
    set(BUILD_TREE TRUE)
else()
    message(STATUS "foxtrotCoreConfig configuring from install tree (normal behaviour)")
    set(BUILD_TREE FALSE)
endif()


if(BUILD_TREE)
    list(APPEND CMAKE_MODULE_PATH "@PACKAGE_ft_core_sourcedir@/cmake/")
else()
    list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")
endif()

find_dependency(Boost REQUIRED COMPONENTS log program_options filesystem thread)
find_dependency(Protobuf REQUIRED)
find_dependency(gRPC REQUIRED)


if(BUILD_TREE)
    include(${CMAKE_CURRENT_LIST_DIR}/foxtrotCoreexports.cmake)
    set_property(TARGET foxtrot::foxtrot_core PROPERTY
      INTERFACE_INCLUDE_DIRECTORIES
      "@PACKAGE_ft_core_binarydir@;@PACKAGE_ft_core_sourcedir@/include")
else()
    if(NOT TARGET foxtrot::foxtrot_core AND NOT foxtrot_core_BINARY_DIR)
        include(${foxtrot_core_PREFIX}/lib/cmake/foxtrotCore/foxtrot_core.cmake)
    endif()
    list(APPEND CMAKE_MODULE_PATH "@PACKAGE_ft_cmakedir@")
endif()


check_required_components(foxtrot_core)
