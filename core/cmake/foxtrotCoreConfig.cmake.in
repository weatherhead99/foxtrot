##Config file for the foxtrot core package

@PACKAGE_INIT@
set(foxtrot_core_PREFIX ${PACKAGE_PREFIX_DIR}/core)


include(CMakeFindDependencyMacro)
find_dependency(Boost REQUIRED COMPONENTS log program_options filesystem thread date_time)
find_dependency(Protobuf REQUIRED)
find_dependency(gRPC REQUIRED)
find_dependency(rttr 0.9.6 REQUIRED)

#WARNING: hack to make it work on windows
if(WIN32)
    add_definitions(-D_WIN32_WINNT=0x0A00)
endif()



if(EXISTS ${CMAKE_CURRENT_LIST_DIR}/foxtrotCoreexports.cmake)
  message(WARNING "foxtrotCoreConfig configuring from BUILD TREE! You may not want this!")
    list(APPEND CMAKE_MODULE_PATH "${foxtrot_core_PREFIX}/cmake/")
    set(BUILD_TREE TRUE)

    include(${CMAKE_CURRENT_LIST_DIR}/foxtrotCoreexports.cmake)
    set_property(TARGET foxtrot::foxtrot_core PROPERTY
      INTERFACE_INCLUDE_DIRECTORIES
      "${CMAKE_CURRENT_LIST_DIR};${foxtrot_core_PREFIX}/include")
    
else()
    message(STATUS "foxtrotCoreConfig configuring from install tree (normal behaviour)")
    set(BUILD_TREE FALSE)
    list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")

    if(NOT TARGET foxtrot::foxtrot_core AND NOT foxtrot_core_BINARY_DIR)
      include(${foxtrot_core_PREFIX}/lib/cmake/foxtrotCore/foxtrot_core.cmake)
    else()
      message(WARNING "targets were already declared, this configuration file did nothing!")
    endif()
    list(APPEND CMAKE_MODULE_PATH "@PACKAGE_ft_cmakedir@")
    
endif()


check_required_components(foxtrot_core)
