#Config file for the foxtrot core package

@PACKAGE_INIT@
set(foxtrot_core_INCLUDE_DIRS "@CONF_INCLUDE_DIRS@")

#set(CMAKE_MODULE_PATH "${CMAKE_MODLE_PATH}/${foxtrot_CMAKE_DIR}")

include(CMakeFindDependencyMacro)

find_dependency(Boost REQUIRED COMPONENTS log)
find_dependency(Protobuf REQUIRED)

if(EXISTS ${CMAKE_CURRENT_LIST_DIR}/installtree)
    message(WARNING "foxtrotCoreConfig configuring from BUILD TREE! You may not want this!")
    set(BUILD_TREE TRUE)
else()
    message(STATUS "foxtrotCoreConfig configuring from install tree (normal behaviour)")
    set(BUILD_TREE FALSE)
endif()


if(BUILD_TREE)
    include(${CMAKE_CURRENT_LIST_DIR}/foxtrotCoreexports.cmake)
    list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_LIST_DIR}/../cmake/)
    set_property(TARGET foxtrot::foxtrot_core APPEND PROPERTY
                 INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_CURRENT_LIST_DIR})
                    
else()
    if(NOT TARGET foxtrot::foxtrot_core AND NOT foxtrot_core_BINARY_DIR)
        include(@PACKAGE_ft_cmakedir@/foxtrot_core.cmake)
    endif()
    list(APPEND CMAKE_MODULE_PATH "@PACKAGE_ft_cmakedir@")
endif()

#need to put this here because only just configured the module path
message(STATUS "cmake module path: ${CMAKE_MODULE_PATH}")
find_dependency(grpc REQUIRED)

check_required_components(foxtrot_core)
