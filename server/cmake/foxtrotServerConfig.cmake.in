#Config file for the foxtrot server package

@PACKAGE_INIT@
set(foxtrot_core_INCLUDE_DIRS "@CONF_INCLUDE_DIRS@")

#set(CMAKE_MODULE_PATH "${CMAKE_MODLE_PATH}/${foxtrot_CMAKE_DIR}")

set(foxtrot_server_PREFIX ${PACKAGE_PREFIX_DIR})

include(CMakeFindDependencyMacro)

if(EXISTS ${CMAKE_CURRENT_LIST_DIR}/foxtrotServerexports.cmake)
    message(WARNING "foxtrotServerConfig configuring from BUILD TREE! You may not want this!")
    set(BUILD_TREE TRUE)
else()
    message(STATUS "foxtrotServerConfig configuring from install tree (normal behaviour)")
    set(BUILD_TREE FALSE)
endif()

list(APPEND CMAKE_MODULE_PATH "${foxtrot_server_PREFIX}/lib/cmake/foxtrotServer")


find_dependency(foxtrotCore REQUIRED)
find_dependency(Boost REQUIRED COMPONENTS program_options filesystem)
find_dependency(CURL REQUIRED)
find_dependency(OpenSSL REQUIRED)
find_dependency(RapidJSON REQUIRED)
find_dependency(libsodium REQUIRED)

if(${CMAKE_SYSTEM_NAME} STREQUAL "Linux")
    find_library(dl dl)
    message(STATUS "libdl: ${dl}")
else()
    message(STATUS "windows build, don't need libdl")
    set(dl "")
endif()



if(BUILD_TREE)
    include(${CMAKE_CURRENT_LIST_DIR}/foxtrotServerexports.cmake)
    set_property(TARGET foxtrot::foxtrot_server APPEND PROPERTY
                 INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_CURRENT_LIST_DIR})
else()
  if(NOT TARGET foxtrot_server AND NOT foxtrot_server_BINARY_DIR)
    include(${foxtrot_server_PREFIX}/lib/cmake/foxtrotServer/foxtrot_server.cmake)
    endif()
endif()

check_required_components(foxtrot_server)
